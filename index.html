<script>
  document.addEventListener('DOMContentLoaded', () => {
    const outputArea = document.getElementById('output-area');
    const input = document.getElementById('command-input');
    const commandHistory = [];
    let historyIndex = -1;
    const commands = ['whoami', 'contact', 'help', 'projects', 'skills', 'clear'];

    input.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        const command = input.value.trim();
        if (command) {
          commandHistory.push(command);
          historyIndex = commandHistory.length;
          handleCommand(command);
          input.value = '';
        }
      } else if (event.key === 'ArrowUp') {
        if (historyIndex > 0) {
          historyIndex--;
          input.value = commandHistory[historyIndex];
        }
      } else if (event.key === 'ArrowDown') {
        if (historyIndex < commandHistory.length - 1) {
          historyIndex++;
          input.value = commandHistory[historyIndex];
        } else {
          historyIndex = commandHistory.length;
          input.value = '';
        }
      } else if (event.key === 'Tab') {
        event.preventDefault();
        const match = commands.find(cmd => cmd.startsWith(input.value));
        if (match) input.value = match;
      }
    });

    function handleCommand(command) {
      const timestamp = new Date().toLocaleTimeString();
      const outputDiv = document.createElement('div');
      outputDiv.className = 'command-output';
      outputDiv.innerHTML = `<span class="text-muted">[${timestamp}] n4nkh@terminal ~$</span> ${command}`;
      let output = '';

      switch (command.toLowerCase()) {
        case 'whoami':
          output = `<div class="mt-2"><h5>Nguy·ªÖn An Kh√°nh</h5><p>Web Pentester & Red Teaming</p><a href="https://n4nkh.id.vn" class="social-icon" target="_blank"><i class="fas fa-globe"></i> n4nkh.id.vn</a></div>`;
          break;
        case 'contact':
          output = `<div class="mt-2"><h5>üì´ Contact</h5><a href="mailto:ankhanh.v09@gmail.com" class="social-icon"><i class="fas fa-envelope"></i> ankhanh.v09@gmail.com</a><br><a href="https://github.com/Saudadeeee" class="social-icon" target="_blank"><i class="fab fa-github"></i> Saudadeeee</a><br><a href="https://x.com/Nankhanh_" class="social-icon" target="_blank"><i class="fab fa-twitter"></i> @Nankhanh_</a><br><a href="https://www.linkedin.com/in/nguy%E1%BB%85n-kh%C3%A1nh-0ba5a215a/" class="social-icon" target="_blank"><i class="fab fa-linkedin"></i> LinkedIn</a></div>`;
          break;
        case 'help':
          output = `<div class="mt-2"><strong>Available commands:</strong><ul><li><code>whoami</code> - Info about me</li><li><code>contact</code> - How to reach me</li><li><code>projects</code> - List of personal projects</li><li><code>skills</code> - My skillset</li><li><code>clear</code> - Clear terminal</li></ul></div>`;
          break;
        case 'projects':
          output = `<div class="mt-2"><h5>üìÅ Projects</h5><ul><li>Bug Bounty Automation Scripts</li><li>Custom Red Team Toolkits</li><li>Browser Exploitation Labs</li></ul></div>`;
          break;
        case 'skills':
          output = `<div class="mt-2"><h5>üõ†Ô∏è Skills</h5><ul><li>Web Pentesting (OWASP Top 10)</li><li>Red Teaming & Adversary Simulation</li><li>Python, Bash, JavaScript</li><li>CTF & Reverse Engineering</li></ul></div>`;
          break;
        case 'clear':
          outputArea.innerHTML = '';
          return;
        default:
          output = `<div class="text-danger">bash: ${command}: command not found</div>`;
      }

      outputDiv.innerHTML += output;
      outputArea.appendChild(outputDiv);
      outputArea.scrollTop = outputArea.scrollHeight;
    }
  });
</script>
